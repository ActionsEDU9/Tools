name: Deploy Windows 11 ARM

on:
  workflow_dispatch:

jobs:
  Server:
    runs-on: windows-11-arm
    steps:
      - name: 迁出代码
        uses: actions/checkout@v3

      - name: 加入Tailscale私有网络
        uses: tailscale/github-action@v3
        with:
          oauth-client-id: ${{ secrets.TS_OAUTH_CLIENT_ID }}
          oauth-secret: ${{ secrets.TS_OAUTH_SECRET }}
          tags: tag:githubactions
          version: latest

      - name: 查看Tailscale 安装日志
        shell: pwsh
        run: |
          cat C:\a\_temp/tailscale.log

      - name: 上传日志文件
        uses: actions/upload-artifact@v4
        if: ${{ always() }}
        with:
          name: tslog
          path: C:\ProgramData\Tailscale
        
